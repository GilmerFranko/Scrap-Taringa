(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[5],{"2IIz":function(e,t,n){"use strict";var r=n("284h"),o=n("TqRt");n("ma9I"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("o0o1"));n("ls82");var u=o(n("yXPU")),i=o(n("lwsE")),s=o(n("W8MJ")),c=o(n("PJYZ")),l=o(n("7W2i")),f=o(n("a1gu")),d=o(n("Nsbk")),p=o(n("lSNA")),h=r(n("q1tI")),g=o(n("17x9")),y=o(n("Ocid")),v=o(n("iEuI")),b=o(n("FWtS")),m=n("j5D7"),w=o(n("kudG")),k=o(n("RVQe"));function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,p.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var o=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,f.default)(this,n)}}var _=new w.default(""),j=b.default.getInstance(),E=v.default.getInstance(),P=function(e){(0,l.default)(o,e);var t,n,r=x(o);function o(){var e;(0,i.default)(this,o);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e=r.call.apply(r,[this].concat(n)),(0,p.default)((0,c.default)(e),"state",{loading:!1}),(0,p.default)((0,c.default)(e),"handleFacebook",(function(t){e.setState({loading:!0}),FB.login(function(){var t=(0,u.default)(a.default.mark((function t(n){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.authResponse){t.next=5;break}return e.setState({loading:!1}),console.log("User cancelled login or did not fully authorize."),e.props.onResponse(null),t.abrupt("return");case 5:if(!e.props.useAuthService){t.next=8;break}return e.handleNewService(n),t.abrupt("return");case 8:e.handleOldService(n);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{scope:"public_profile,email,user_birthday,user_location,user_gender"})})),(0,p.default)((0,c.default)(e),"toggleVisible",(function(){e.setState({visible:!e.state.visible})})),e}return(0,s.default)(o,[{key:"handleNewService",value:(n=(0,u.default)(a.default.mark((function e(t){var n,r,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.authResponse.accessToken,e.prev=1,e.next=4,E.loginWith("facebook",n);case 4:if(!(r=e.sent).loggedIn){e.next=13;break}return e.t0=m.signInEvent,e.next=9,j.user.about();case 9:return e.t1=e.sent,(0,e.t0)(e.t1,"facebook"),window.location.reload(),e.abrupt("return");case 13:return this.setState({loading:!1}),this.props.onResponse(S({social:"facebook"},r)),e.abrupt("return");case 18:e.prev=18,e.t2=e.catch(1),this.setState({loading:!1}),this.props.onResponse(S({error:!0},null===e.t2||void 0===e.t2||null===(o=e.t2.response)||void 0===o?void 0:o.body)),y.default.error(e.t2);case 23:case"end":return e.stop()}}),e,this,[[1,18]])}))),function(e){return n.apply(this,arguments)})},{key:"handleOldService",value:(t=(0,u.default)(a.default.mark((function e(t){var n,r,o,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.authResponse,r=n.accessToken,o=n.expiresIn,e.prev=1,e.next=4,_.post("/loginWithFacebook",{data:{accessToken:r,expiresIn:o},contentType:"application/x-www-form-urlencoded; charset=utf-8"});case 4:(u=e.sent).loggedIn?window.location.reload():this.props.onResponse(u),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),this.setState({loading:!1}),this.props.onResponse(null),y.default.error(e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.props,t=e.icon,n=e.text,r=this.state.loading;return h.default.createElement(k.default,{icon:t,text:n,type:"facebook",margin:"left",loading:r,onClick:this.handleFacebook})}}]),o}(h.PureComponent);t.default=P,(0,p.default)(P,"contextTypes",{translate:g.default.func.isRequired}),e.exports=t.default},"3HZZ":function(e,t,n){var r;window,e.exports=(r=n("q1tI"),function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(t){return e[t]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e){e.exports=r},function(e,t,n){e.exports=n(2)()},function(e,t,n){"use strict";function r(){}var o=n(3);e.exports=function(){function e(e,t,n,r,a,u){if(u!==o){var i=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}var n={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n}},function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.r(t);var p=n(0),h=n.n(p),g=(n(1),function(e){return h.a.createElement("div",{style:{marginRight:10,background:e.active?"#eee":"#fff",padding:10,borderRadius:2}},h.a.createElement("svg",{width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg"},h.a.createElement("g",{fill:"#000",fillRule:"evenodd"},h.a.createElement("path",{d:"M9 3.48c1.69 0 2.83.73 3.48 1.34l2.54-2.48C13.46.89 11.43 0 9 0 5.48 0 2.44 2.02.96 4.96l2.91 2.26C4.6 5.05 6.62 3.48 9 3.48z",fill:"#EA4335"}),h.a.createElement("path",{d:"M17.64 9.2c0-.74-.06-1.28-.19-1.84H9v3.34h4.96c-.1.83-.64 2.08-1.84 2.92l2.84 2.2c1.7-1.57 2.68-3.88 2.68-6.62z",fill:"#4285F4"}),h.a.createElement("path",{d:"M3.88 10.78A5.54 5.54 0 0 1 3.58 9c0-.62.11-1.22.29-1.78L.96 4.96A9.008 9.008 0 0 0 0 9c0 1.45.35 2.82.96 4.04l2.92-2.26z",fill:"#FBBC05"}),h.a.createElement("path",{d:"M9 18c2.43 0 4.47-.8 5.96-2.18l-2.84-2.2c-.76.53-1.78.9-3.12.9-2.38 0-4.4-1.57-5.12-3.74L.97 13.04C2.45 15.98 5.48 18 9 18z",fill:"#34A853"}),h.a.createElement("path",{fill:"none",d:"M0 0h18v18H0z"}))))}),y=function(e){return h.a.createElement("span",{style:{paddingRight:10,fontWeight:500,paddingLeft:e.icon?0:10,paddingTop:10,paddingBottom:10}},e.children)},v=function(){function e(t){var n,o;return function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),(n=!(o=a(e).call(this,t))||"object"!==r(o)&&"function"!=typeof o?i(this):o).signIn=n.signIn.bind(i(i(n))),n.enableButton=n.enableButton.bind(i(i(n))),n.state={disabled:!0,hovered:!1,active:!1},n}var t;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(e,p.Component),(t=[{key:"componentDidMount",value:function(){var e,t,n,r=this,o=this.props,a=o.clientId,u=o.cookiePolicy,i=o.loginHint,s=o.hostedDomain,c=o.autoLoad,l=o.isSignedIn,f=o.fetchBasicProfile,d=o.redirectUri,p=o.discoveryDocs,h=o.onFailure,g=o.uxMode,y=o.scope,v=o.accessType,b=o.responseType,m=o.jsSrc;n=t=(e=document).getElementsByTagName("script")[0],(n=e.createElement("script")).id="google-login",n.src=m,t&&t.parentNode?t.parentNode.insertBefore(n,t):e.head.appendChild(n),n.onload=function(){var e={client_id:a,cookie_policy:u,login_hint:i,hosted_domain:s,fetch_basic_profile:f,discoveryDocs:p,ux_mode:g,redirect_uri:d,scope:y,access_type:v};"code"===b&&(e.access_type="offline"),window.gapi.load("auth2",(function(){r.enableButton(),window.gapi.auth2.getAuthInstance()||window.gapi.auth2.init(e).then((function(e){l&&e.isSignedIn.get()&&r.handleSigninSuccess(e.currentUser.get())}),(function(e){return h(e)})),c&&r.signIn()}))}}},{key:"componentWillUnmount",value:function(){this.enableButton=function(){}}},{key:"enableButton",value:function(){this.setState({disabled:!1})}},{key:"signIn",value:function(e){var t=this;if(e&&e.preventDefault(),!this.state.disabled){var n=window.gapi.auth2.getAuthInstance(),r=this.props,o=r.onSuccess,a=r.onFailure,u=r.responseType,i={prompt:r.prompt};(0,r.onRequest)(),"code"===u?n.grantOfflineAccess(i).then((function(e){return o(e)}),(function(e){return a(e)})):n.signIn(i).then((function(e){return t.handleSigninSuccess(e)}),(function(e){return a(e)}))}}},{key:"handleSigninSuccess",value:function(e){var t=e.getBasicProfile(),n=e.getAuthResponse();e.googleId=t.getId(),e.tokenObj=n,e.tokenId=n.id_token,e.accessToken=n.access_token,e.profileObj={googleId:t.getId(),imageUrl:t.getImageUrl(),email:t.getEmail(),name:t.getName(),givenName:t.getGivenName(),familyName:t.getFamilyName()},this.props.onSuccess(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.tag,r=t.type,o=t.className,a=t.disabledStyle,u=t.buttonText,i=t.children,s=t.render,c=t.theme,l=t.icon,f=this.state.disabled||this.props.disabled;if(s)return s({onClick:this.signIn});var d={backgroundColor:"dark"===c?"rgb(66, 133, 244)":"#fff",display:"inline-flex",alignItems:"center",color:"dark"===c?"#fff":"rgba(0, 0, 0, .54)",boxShadow:"0 2px 2px 0 rgba(0, 0, 0, .24), 0 0 1px 0 rgba(0, 0, 0, .24)",padding:0,borderRadius:2,border:"1px solid transparent",fontSize:14,fontWeight:"500",fontFamily:"Roboto, sans-serif"},p={cursor:"pointer",backgroundColor:"dark"===c?"#3367D6":"#eee",color:"dark"===c?"#fff":"rgba(0, 0, 0, .54)",opacity:1},v=f?Object.assign({},d,a):e.state.active?Object.assign({},d,p):e.state.hovered?Object.assign({},d,{cursor:"pointer",opacity:.9}):d;return h.a.createElement(n,{onMouseEnter:function(){return e.setState({hovered:!0})},onMouseLeave:function(){return e.setState({hovered:!1,active:!1})},onMouseDown:function(){return e.setState({active:!0})},onMouseUp:function(){return e.setState({active:!1})},onClick:this.signIn,style:v,type:r,disabled:f,className:o},[l&&h.a.createElement(g,{key:1,active:this.state.active}),h.a.createElement(y,{icon:l,key:2},i||u)])}}])&&o(e.prototype,t),e}();v.defaultProps={type:"button",tag:"button",buttonText:"Sign in with Google",scope:"profile email",accessType:"online",prompt:"",cookiePolicy:"single_host_origin",fetchBasicProfile:!0,isSignedIn:!1,uxMode:"popup",disabledStyle:{opacity:.6},icon:!0,theme:"light",onRequest:function(){},jsSrc:"https://apis.google.com/js/client:platform.js"};var b=v,m=function(){function e(t){var n,r;return function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),(n=!(r=l(e).call(this,t))||"object"!==s(r)&&"function"!=typeof r?d(this):r).signOut=n.signOut.bind(d(d(n))),n.enableButton=n.enableButton.bind(d(d(n))),n.state={disabled:!0,hovered:!1,active:!1},n}var t;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(e,p.Component),(t=[{key:"componentDidMount",value:function(){var e,t,n,r=this,o=this.props.jsSrc;n=t=(e=document).getElementsByTagName("script")[0],(n=e.createElement("script")).id="google-login",n.src=o,t&&t.parentNode?t.parentNode.insertBefore(n,t):e.head.appendChild(n),n.onload=function(){r.enableButton()}}},{key:"componentWillUnmount",value:function(){this.enableButton=function(){}}},{key:"enableButton",value:function(){this.setState({disabled:!1})}},{key:"signOut",value:function(){var e=window.gapi.auth2.getAuthInstance();null!=e&&e.signOut().then(this.props.onLogoutSuccess)}},{key:"render",value:function(){var e=this,t=this.props,n=t.tag,r=t.type,o=t.className,a=t.disabledStyle,u=t.buttonText,i=t.children,s=t.render,c=t.theme,l=t.icon;if(s)return s({onClick:this.signOut});var f=this.state.disabled||this.props.disabled,d={backgroundColor:"dark"===c?"rgb(66, 133, 244)":"#fff",display:"inline-flex",alignItems:"center",color:"dark"===c?"#fff":"rgba(0, 0, 0, .54)",boxShadow:"0 2px 2px 0 rgba(0, 0, 0, .24), 0 0 1px 0 rgba(0, 0, 0, .24)",padding:0,borderRadius:2,border:"1px solid transparent",fontSize:14,fontWeight:"500",fontFamily:"Roboto, sans-serif"},p={cursor:"pointer",backgroundColor:"dark"===c?"#3367D6":"#eee",color:"dark"===c?"#fff":"rgba(0, 0, 0, .54)",opacity:1},v=f?Object.assign({},d,a):e.state.active?Object.assign({},d,p):e.state.hovered?Object.assign({},d,{cursor:"pointer",opacity:.9}):d;return h.a.createElement(n,{onMouseEnter:function(){return e.setState({hovered:!0})},onMouseLeave:function(){return e.setState({hovered:!1,active:!1})},onMouseDown:function(){return e.setState({active:!0})},onMouseUp:function(){return e.setState({active:!1})},onClick:this.signOut,style:v,type:r,disabled:f,className:o},[l&&h.a.createElement(g,{key:1,active:this.state.active}),h.a.createElement(y,{icon:l,key:2},i||u)])}}])&&c(e.prototype,t),e}();m.defaultProps={type:"button",tag:"button",buttonText:"Logout of Google",disabledStyle:{opacity:.6},icon:!0,theme:"light",jsSrc:"https://apis.google.com/js/client:platform.js"};var w=m;n.d(t,"default",(function(){return b})),n.d(t,"GoogleLogin",(function(){return b})),n.d(t,"GoogleLogout",(function(){return w}))}]))},F0Fy:function(e,t,n){"use strict";var r=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.Tooltip=h,t.default=void 0;var a=o(n("pVnL")),u=o(n("J4zp")),i=o(n("QILm")),s=(o(n("17x9")),r(n("q1tI"))),c=o(n("OnOE")),l=o(n("TSYQ")),f=o(n("TFNl")),d=o(n("VmUO")),p="tooltip-element";function h(e){var t=e.className,n=e.place,r=e.message,o=e.children,f=e.disabled,h=(0,i.default)(e,["className","place","message","children","disabled"]),g=(0,s.useState)(!1),y=(0,u.default)(g,2),v=y[0],b=y[1],m=(0,s.useCallback)((function(){return b(!0)}),[]),w=(0,s.useCallback)((function(){return b(!1)}),[]);return(0,s.useEffect)((function(){v&&!f&&c.default.show(p)}),[v,f]),s.default.createElement("div",(0,a.default)({},h,{onMouseOver:m,onMouseLeave:w,"data-for":p,"data-tip":!0}),v&&!f&&s.default.createElement(c.default,{place:n,id:p,effect:"solid",className:(0,l.default)(d.default.tooltip,t)},r),o)}h.defaultProps={className:null,place:"top",disabled:!1};var g=(0,f.default)((function(e,t){return!t.isMobile}))(h);t.default=g},RVQe:function(e,t,n){"use strict";var r=n("TqRt");n("ma9I"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var o=r(n("lSNA")),a=r(n("q1tI")),u=r(n("TSYQ")),i=(r(n("17x9")),n("+FBA")),s=r(n("lGsQ"));function c(e){var t,n=e.type,r=e.className,c=e.icon,l=e.text,f=e.loading,d=e.onClick,p=e.margin,h="".concat(n,"_button"),g=(0,u.default)((t={},(0,o.default)(t,s.default[h],n),(0,o.default)(t,s.default["".concat(h,"_margin_").concat(p)],p),t),r);return a.default.createElement(i.BaseButton,{full:!0,inverted:!0,withTextBold:!0,size:"large",icon:c,text:l,loading:f,onClick:d,className:g})}c.defaultProps={className:"",icon:null,text:"",loading:!1,onClick:null,margin:""},e.exports=t.default},TFNl:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n("QILm")),a=r(n("17x9")),u=r(n("q1tI")),i=n("lcoE");var s=function(e){var t=function(e){return"function"==typeof e?e:function(){return!0}}(e);return function(e){function n(n,r){var a=n.children,i=(0,o.default)(n,["children"]);return t(i,r)?u.default.createElement(e,i,a):a}return n.contextTypes={isMobile:a.default.bool.isRequired},n.displayName=(0,i.getDisplayName)(e,"WithWrapper"),n}};t.default=s,e.exports=t.default},iEuI:function(e,t,n){"use strict";(function(r){var o=n("284h"),a=n("TqRt");n("yq1k"),n("qePV"),n("JTJg"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(n("sXyB")),i=a(n("o0o1"));n("ls82");var s=a(n("yXPU")),c=a(n("lwsE")),l=a(n("W8MJ")),f=a(n("PJYZ")),d=a(n("7W2i")),p=a(n("a1gu")),h=a(n("Nsbk")),g=a(n("lSNA")),y=a(n("5yww")),v=n("otlr"),b=a(n("kudG")),m=o(n("2r0l")),w=n("CSOT");function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,g.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.default)(e);if(t){var o=(0,h.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,p.default)(this,n)}}var x=r.env.OAUTH_REQUEST_TIMEOUT||2e4,_=function(e){(0,d.default)(b,e);var t,n,r,o,a,u,p,h=S(b);function b(e,t){var n;return(0,c.default)(this,b),n=h.call(this,t||"/api/auth",{},{},x),(0,g.default)((0,f.default)(n),"beforeRequest",function(){var e=(0,s.default)(i.default.mark((function e(t){var r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,n.getAuth();case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=n.getCredentials();case 7:(r=e.t0)&&r.access_token&&t.set("Authorization","Bearer ".concat(r.access_token));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,g.default)((0,f.default)(n),"getAuth",(0,w.synchronized)((0,s.default)(i.default.mark((function e(){var t,r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=n.getCredentials()).access_token){e.next=14;break}if(!t.refresh_token){e.next=13;break}return e.prev=3,e.next=6,n.refreshToken();case 6:return e.abrupt("return",n.getCredentials());case 9:return e.prev=9,e.t0=e.catch(3),r=e.t0.status||e.t0.statusCode,e.abrupt("return",503===r?{error:503}:null);case 13:return e.abrupt("return",null);case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e,null,[[3,9]])}))))),n.req=e,n}return(0,l.default)(b,[{key:"saveTokens",value:function(e){y.default.save("t",e.access_token,O({maxAge:Number(e.expires_in),path:"/"},m.secure())),y.default.save("r",e.refresh_token,O({maxAge:v.ONE_YEAR_SECONDS,path:"/"},m.secure()))}},{key:"login",value:(p=(0,s.default)(i.default.mark((function e(t,n){var r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.post("/login",{data:(r={},(0,g.default)(r,t.includes("@")?"email":"username",t),(0,g.default)(r,"password",n),r)});case 3:e.t1=e.sent,e.t0.saveTokens.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return p.apply(this,arguments)})},{key:"refreshToken",value:(u=(0,s.default)(i.default.mark((function e(){var t,n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getCredentials(),n=t.refresh_token,e.t0=this,e.next=4,this.post("/token/refresh",{data:{refresh_token:n}});case 4:e.t1=e.sent,e.t0.saveTokens.call(e.t0,e.t1);case 6:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"checkAvailability",value:(a=(0,s.default)(i.default.mark((function e(t,n){var r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/availability/".concat(t),{data:(0,g.default)({},t,n)});case 2:return r=e.sent,e.abrupt("return",r.available);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"loginWith",value:(o=(0,s.default)(i.default.mark((function e(t,n){var r,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/connect/".concat(t),{data:O({accessToken:n},"google"===t?{platform:"javascript"}:{})});case 2:return r=e.sent,(o=!!r.access_token)&&this.saveTokens(r),e.abrupt("return",O({loggedIn:o},r));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"signup",value:(r=(0,s.default)(i.default.mark((function e(t,n){var r,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/signup/".concat(t),{data:n});case 2:return r=e.sent,(o=!!r.access_token)&&this.saveTokens(r),e.abrupt("return",O({loggedIn:o},r));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"usernameSuggestions",value:(n=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/suggestions/username",{data:{username:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"isLoggedIn",value:(t=(0,s.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAuth();case 2:return e.abrupt("return",!!e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getCredentials",value:function(){return{access_token:y.default.load("t"),refresh_token:y.default.load("r")}}}]),b}(b.default),j=function(){function e(){(0,c.default)(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(0,u.default)(_,n)}return(0,l.default)(e,null,[{key:"getInstance",value:function(){return e.INSTANCE||(e.INSTANCE=new _),e.INSTANCE}}]),e}();t.default=j,(0,g.default)(j,"INSTANCE",null),e.exports=t.default}).call(this,n("8oxB"))},lcoE:function(e,t,n){"use strict";n("ma9I"),n("sMBO"),Object.defineProperty(t,"__esModule",{value:!0}),t.getDisplayName=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Component",r=e.displayName||e.name||n;return"".concat(t,"(").concat(r,")")}},yOzB:function(e,t,n){"use strict";var r=n("284h"),o=n("TqRt");n("ma9I"),n("oVuX"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("o0o1"));n("ls82");var u=o(n("yXPU")),i=o(n("lwsE")),s=o(n("W8MJ")),c=o(n("PJYZ")),l=o(n("7W2i")),f=o(n("a1gu")),d=o(n("Nsbk")),p=o(n("lSNA")),h=o(n("cDf5")),g=r(n("q1tI")),y=o(n("17x9")),v=(o(n("TSYQ")),o(n("kudG"))),b=o(n("iEuI")),m=o(n("FWtS")),w=n("j5D7"),k=o(n("YY+O")),O=o(n("Ocid")),S=o(n("RVQe"));function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,p.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var o=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,f.default)(this,n)}}var E=("object"===("undefined"==typeof window?"undefined":(0,h.default)(window))?n("3HZZ"):{}).GoogleLogin,P=new v.default(""),T=m.default.getInstance(),I=b.default.getInstance(),R=k.default.get("GOOGLE_CLIENT_ID")||"",N=function(e){(0,l.default)(o,e);var t,n,r=j(o);function o(){var e;(0,i.default)(this,o);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e=r.call.apply(r,[this].concat(n)),(0,p.default)((0,c.default)(e),"state",{loading:!1}),(0,p.default)((0,c.default)(e),"toggleVisible",(function(){e.setState({visible:!e.state.visible})})),(0,p.default)((0,c.default)(e),"handleGoogle",(function(t){return function(n){e.setState({loading:!0}),t(n)}})),(0,p.default)((0,c.default)(e),"renderButton",(function(t){var n=e.props,r=n.className,o=n.icon,a=n.text,u=e.state.loading;return g.default.createElement(S.default,{icon:o,text:a,type:"google",margin:"right",loading:u,className:r,onClick:e.handleGoogle(t.onClick)})})),(0,p.default)((0,c.default)(e),"onGoogleSuccess",function(){var t=(0,u.default)(a.default.mark((function t(n){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.useAuthService){t.next=3;break}return e.handleNewService(n),t.abrupt("return");case 3:e.handleOldService(n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(0,p.default)((0,c.default)(e),"onGoogleError",(function(t){O.default.error(t),e.setState({loading:!1})})),e}return(0,s.default)(o,[{key:"handleNewService",value:(n=(0,u.default)(a.default.mark((function e(t){var n,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.loginWith("google",t.code);case 3:if(!(n=e.sent).loggedIn){e.next=12;break}return e.t0=w.signInEvent,e.next=8,T.user.about();case 8:return e.t1=e.sent,(0,e.t0)(e.t1,"google"),window.location.reload(),e.abrupt("return");case 12:return this.setState({loading:!1}),this.props.onResponse(_({social:"google"},n)),e.abrupt("return");case 17:e.prev=17,e.t2=e.catch(0),this.setState({loading:!1}),this.props.onResponse(_({error:!0},null===e.t2||void 0===e.t2||null===(r=e.t2.response)||void 0===r?void 0:r.body)),O.default.error(e.t2);case 22:case"end":return e.stop()}}),e,this,[[0,17]])}))),function(e){return n.apply(this,arguments)})},{key:"handleOldService",value:(t=(0,u.default)(a.default.mark((function e(t){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.post("/loginWithGoogle",{data:{code:t.code},contentType:"application/x-www-form-urlencoded; charset=utf-8"});case 3:(n=e.sent).loggedIn?window.location.reload():this.props.onResponse(n),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),this.setState({loading:!1}),this.props.onResponse(null),O.default.error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){return g.default.createElement(E,{clientId:R,render:this.renderButton,scope:["https://www.googleapis.com/auth/userinfo.profile","https://www.googleapis.com/auth/userinfo.email","https://www.googleapis.com/auth/plus.login","https://www.googleapis.com/auth/user.birthday.read"].join(" "),responseType:"code",buttonText:"Login",onSuccess:this.onGoogleSuccess,onFailure:this.onGoogleError})}}]),o}(g.PureComponent);(0,p.default)(N,"contextTypes",{translate:y.default.func.isRequired});var C=N;t.default=C,e.exports=t.default}}]);
//# sourceMappingURL=Components-HamburgerMenu~Login~LoginDialog~Register~RegisterDialog.1326c0cb6d7066aec2cc.js.map