(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[94],{"6ocl":function(e,t,n){"use strict";var r=n("284h"),a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("lwsE")),l=a(n("W8MJ")),u=a(n("7W2i")),s=a(n("a1gu")),i=a(n("Nsbk")),d=a(n("lSNA")),c=r(n("q1tI")),f=a(n("17x9")),m=a(n("TSYQ")),p=a(n("POK0"));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,i.default)(e);if(t){var a=(0,i.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var y=function(e){(0,u.default)(n,e);var t=h(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,l.default)(n,[{key:"render",value:function(){var e=this.props,t=e.amount,n=e.filters,r=(0,m.default)(p.default.comment_count,(0,d.default)({},p.default.comment_count_empty,0===t));return c.default.createElement("header",{className:p.default.comment_header},c.default.createElement("div",{className:p.default.comment_header_left},c.default.createElement("span",{"data-role":"comment-count",className:r},t),this.context.translate("comment.amount",{comments:t})),n)}}]),n}(c.PureComponent);t.default=y,(0,d.default)(y,"contextTypes",{translate:f.default.func.isRequired,filters:f.default.node}),e.exports=t.default},"7un9":function(e,t,n){"use strict";var r=n("284h");n("rB9j"),n("hByQ"),n("R5XZ"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("q1tI")),o=n("Ty5D"),l=a.default.forwardRef((function(e,t){var n=(0,o.useLocation)(),r=n.hash,l=n.search;return(0,a.useEffect)((function(){var e;return"#comments"===r&&""===l&&function n(){e=setTimeout((function(){if(t.current&&"complete"===document.readyState){var e=t.current.getBoundingClientRect().top-68;window.scrollTo({top:e})}else n()}),200)}(),function(){clearTimeout(e)}}),[r,l]),null}));t.default=l,e.exports=t.default},"8OzT":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SurfaceShadow=t.SurfaceWhiteSmoke=t.SurfaceYellow=t.SurfaceDark=t.SurfaceSecondary=t.SurfacePrimary=t.SurfacePadding=t.SurfaceVariant=void 0;var a,o,l=r(n("pVnL")),u=r(n("lSNA")),s=r(n("QILm")),i=r(n("q1tI")),d=r(n("TSYQ")),c=r(n("9UQp"));function f(e){var t,n=e.children,r=e.rounded,a=e.padding,o=e.className,f=e.variant,m=(0,s.default)(e,["children","rounded","padding","className","variant"]),p=(t={},(0,u.default)(t,c.default.rounded,r),(0,u.default)(t,c.default["p-".concat(a)],a),t),h=(0,d.default)(c.default[f],p,o);return i.default.createElement("div",(0,l.default)({},m,{className:h}),n)}t.SurfaceVariant=a,function(e){e.Base="base",e.Primary="primary",e.Secondary="secondary",e.Dark="dark",e.Yellow="yellow",e.Smoke="smoke",e.Shadow="shadow"}(a||(t.SurfaceVariant=a={})),t.SurfacePadding=o,function(e){e.Base="base",e.Tight="tight",e.None="none"}(o||(t.SurfacePadding=o={})),f.defaultProps={padding:"none",rounded:!1};t.SurfacePrimary=function(e){return i.default.createElement(f,(0,l.default)({},e,{variant:a.Primary}))};t.SurfaceSecondary=function(e){return i.default.createElement(f,(0,l.default)({},e,{variant:a.Secondary}))};t.SurfaceDark=function(e){return i.default.createElement(f,(0,l.default)({},e,{variant:a.Dark}))};t.SurfaceYellow=function(e){return i.default.createElement(f,(0,l.default)({},e,{variant:a.Yellow}))};t.SurfaceWhiteSmoke=function(e){return i.default.createElement(f,(0,l.default)({},e,{variant:a.Smoke}))};t.SurfaceShadow=function(e){return i.default.createElement(f,(0,l.default)({},e,{variant:a.Shadow}))};var m=f;t.default=m},"9XjU":function(e,t,n){"use strict";var r=n("284h"),a=n("TqRt");n("ma9I"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("lwsE")),l=a(n("W8MJ")),u=a(n("PJYZ")),s=a(n("7W2i")),i=a(n("a1gu")),d=a(n("Nsbk")),c=a(n("lSNA")),f=r(n("q1tI")),m=(a(n("17x9")),a(n("F0Fy"))),p=a(n("TSYQ")),h=a(n("hjDE"));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.default)(this,n)}}var v=function(e){(0,s.default)(n,e);var t=y(n);function n(){var e;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a)),(0,c.default)((0,u.default)(e),"buttonClass",(function(){var t,n=e.props,r=n.selected,a=n.className;return(0,p.default)(h.default.button,(t={},(0,c.default)(t,h.default.button_selected,r),(0,c.default)(t,a,Boolean(a)),t))})),(0,c.default)((0,u.default)(e),"renderChildren",(function(){var t=e.props,n=t.tooltip,r=t.children;return n?f.default.createElement(m.default,{message:f.default.createElement("span",null,n.message),id:n.id},r):r})),e}return(0,l.default)(n,[{key:"render",value:function(){var e=this.props.onClick;return f.default.createElement("div",{"data-role":this.props["data-role"],onClick:e,className:this.buttonClass()},this.renderChildren())}}]),n}(f.PureComponent);t.default=v,e.exports=t.default},A3KS:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var a=r(n("q1tI")),o=r(n("17x9")),l=r(n("a1Cn")),u=r(n("POK0"));function s(e,t){var n=t.translate;return a.default.createElement("header",{className:u.default.comment_header},a.default.createElement("div",{className:u.default.comment_header_left},a.default.createElement("span",{className:u.default.comment_cert},a.default.createElement(l.default,null)),n("comment.tops")))}s.contextTypes={translate:o.default.func.isRequired},e.exports=t.default},Ajk5:function(e,t,n){"use strict";var r=n("TqRt"),a=n("284h");n("2B1R"),n("+2oP"),n("ToJy"),n("DQNa"),n("5DmW"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MAX_TOXICITY_ALLOWED=void 0;var o,l,u,s,i=r(n("lwsE")),d=r(n("W8MJ")),c=r(n("PJYZ")),f=r(n("7W2i")),m=r(n("a1gu")),p=r(n("Nsbk")),h=r(n("lSNA")),y=r(n("U+yc")),v=r(n("17x9")),R=a(n("q1tI")),g=r(n("i8i4")),E=n("ANjH"),w=r(n("TSYQ")),C=n("oj8d"),b=n("/MKj"),T=n("KUH5"),_=a(n("Wl9P")),x=r(n("JAAC")),M=r(n("b62M")),S=n("jcWU"),O=a(n("Sazc")),N=r(n("Cgsy")),P=n("K73w"),A=r(n("gswB")),D=r(n("p4A8"));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,m.default)(this,n)}}t.MAX_TOXICITY_ALLOWED=.9;var I=(0,b.connect)((function(e,t){return{owner:e.entities.users.data[t.comment.owner],threadState:e.commentEditor,storyOwner:e.entities.users.data[e.entities.stories.data[t.story.id].owner],channelOwnerUsername:(0,N.default)(e,e.entities.stories.data[t.story.id]),focusCommentId:e.commentFeed.commentId,focusReplyId:e.commentFeed.replyId,mode:e.commentFeedMode}}),(function(e){return(0,E.bindActionCreators)({loadReplies:_.default},e)}))((s=u=function(e){(0,f.default)(n,e);var t=k(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this,e),(0,h.default)((0,c.default)(r),"setCommentEditorRef",(function(e){r.commentEditor=e})),(0,h.default)((0,c.default)(r),"isModerator",(function(){return"moderator"===r.props.story.channel.state.subscription})),(0,h.default)((0,c.default)(r),"isAdmin",(function(){return"administrator"===r.props.story.channel.state.subscription})),(0,h.default)((0,c.default)(r),"canToggleVisibility",(function(){return O.userCanChangeCommentVisibility(r.props.user,r.props.storyOwner.username,r.props.channelOwnerUsername)||r.isModerator()||r.isAdmin()})),(0,h.default)((0,c.default)(r),"shouldRenderComment",(function(e,t){var n=e.hidden,a=e.toxicity,o=e.nsfw;if(!r.props.user)return!n&&!o&&a<.9;var l=r.props.user&&r.props.user.username===t.username;return n&&l||!n})),(0,h.default)((0,c.default)(r),"shouldRenderCommentToggle",(function(e){return e.hidden&&r.canToggleVisibility()})),(0,h.default)((0,c.default)(r),"toggleLocalCommentVisibility",(function(){r.setState((function(e){return{showHiddenComment:!e.showHiddenComment}}))})),(0,h.default)((0,c.default)(r),"renderCommentToggle",(function(){var e=r.state.showHiddenComment;return R.default.createElement(R.default.Fragment,null,R.default.createElement(M.default,{commentId:r.props.comment.id,onToggle:r.toggleLocalCommentVisibility,showHiddenComment:e}),e&&r.renderThread())})),r.state={replying:!1,hideReplies:!0,repliesAdded:1,showHiddenComment:!1},r}return(0,d.default)(n,[{key:"componentWillReceiveProps",value:function(e){var t=e.activeReplyBox!==this.props.comment.id,n=e.threadState.submitted,r=this.props.threadState.submitted!==n&&n&&n.parentId===this.props.comment.id;(t||r)&&this.hideReplyBox()}},{key:"showReplyBox",value:function(e){var t=this;this.props.showThisReplyBox(this.props.comment.id),this.setState({replying:!0,replyingTo:e},(function(){var e=g.default.findDOMNode(t.commentEditor);e&&t.scrollToReplyBox(e)}))}},{key:"scrollToReplyBox",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Math.max(document.documentElement.clientHeight,window.innerHeight||0),r=e.getBoundingClientRect().top;if(n<r+e.scrollHeight){var a=r;t?a+=e.scrollHeight-n:a-=e.scrollHeight/2,document.documentElement.scrollTop?document.documentElement.scrollTop+=a:document.body.scrollTop+=a}}},{key:"hideReplyBox",value:function(){this.setState({replying:!1,replyingTo:void 0})}},{key:"nextPage",value:function(){var e=this.props,t=e.comment,n=e.classicType;this.state.hideReplies&&t.replies.items.length>_.REPLIES_FIRST_PAGE_AMOUNT?this.setState({hideReplies:!1}):this.props.loadReplies(t.id,_.CREATED_DESC,t.replies.after,n)}},{key:"updateRepliesShown",value:function(){this.setState({repliesAdded:this.state.repliesAdded+1})}},{key:"renderReply",value:function(e){var t=this.props.focusReplyId;return R.default.createElement(A.default,{key:e.id,comment:e,focus:t===e.id,parentId:this.props.comment.id,story:this.props.story,showReplyBox:this.showReplyBox,showActions:this.props.showActions,reply:!0,parentIsHidden:this.state.showHiddenComment,shouldRenderCommentToggle:this.shouldRenderCommentToggle,shouldRenderComment:this.shouldRenderComment})}},{key:"renderThread",value:function(){var e=this,t=this.props,n=t.comment,r=t.replies,a=t.focusCommentId,o=t.focusReplyId,l=t.mode,u=r.slice().sort((function(e,t){return new Date(e.created)-new Date(t.created)}));this.state.hideReplies&&n.replies.count>_.REPLIES_FIRST_PAGE_AMOUNT&&(u=u.slice(u.length-this.state.repliesAdded,u.length));var s=n.replies.totalCount+this.state.repliesAdded-1-u.length,i=(0,w.default)((0,h.default)({},D.default.lowOpacity,this.state.showHiddenComment));return R.default.createElement("div",{"data-role":"comment-thread",key:n.id,className:i},R.default.createElement(A.default,{key:n.id,comment:n,story:this.props.story,showReplyBox:this.showReplyBox,isReplying:this.state.replying,showActions:this.props.showActions,focus:!o&&a===n.id,seeMore:(this.state.hideReplies&&n.replies.count>_.REPLIES_FIRST_PAGE_AMOUNT||n.replies.count>=_.REPLIES_PAGE_SIZE)&&s>0&&l===T.LOADING_MODES.NORMAL&&R.default.createElement("button",{onClick:this.nextPage,className:D.default.reply_comment_more},this.context.translate("comment.reply.see.more",{replies:s}),"  ▾"),shouldRenderCommentToggle:this.shouldRenderCommentToggle,shouldRenderComment:this.shouldRenderComment}),R.default.createElement(P.SurfaceYellow,{border:!0,className:D.default.reply_container},l===T.LOADING_MODES.NORMAL&&u.length>0&&u.map((function(t){return e.renderReply(t)})),l===T.LOADING_MODES.TARGET&&r.length>0&&R.default.createElement(R.default.Fragment,null,R.default.createElement(S.ReplySeeMore,{commentId:n.id,direction:T.TARGET_DIRECTIONS.BEFORE,top:!0}),r.map((function(t){return e.renderReply(t)})),R.default.createElement(S.ReplySeeMore,{commentId:n.id,direction:T.TARGET_DIRECTIONS.AFTER})),this.state.replying&&R.default.createElement(x.default,{parentType:"comment",parentId:n.id,parentOwner:this.state.replyingTo,story:this.props.story,user:this.props.user,hideReplyBox:this.hideReplyBox,ref:this.setCommentEditorRef,updateRepliesShown:this.updateRepliesShown})))}},{key:"render",value:function(){var e=this.props.comment;return this.shouldRenderCommentToggle(e)?this.renderCommentToggle():this.shouldRenderComment(e,this.props.owner)?this.renderThread():null}}]),n}(R.Component),(0,h.default)(u,"defaultProps",{focusCommentId:null,focusReplyId:null,mode:null}),(0,h.default)(u,"contextTypes",{translate:v.default.func}),l=s,(0,y.default)(l.prototype,"showReplyBox",[C.autobind],Object.getOwnPropertyDescriptor(l.prototype,"showReplyBox"),l.prototype),(0,y.default)(l.prototype,"hideReplyBox",[C.autobind],Object.getOwnPropertyDescriptor(l.prototype,"hideReplyBox"),l.prototype),(0,y.default)(l.prototype,"nextPage",[C.autobind],Object.getOwnPropertyDescriptor(l.prototype,"nextPage"),l.prototype),(0,y.default)(l.prototype,"updateRepliesShown",[C.autobind],Object.getOwnPropertyDescriptor(l.prototype,"updateRepliesShown"),l.prototype),(0,y.default)(l.prototype,"renderReply",[C.autobind],Object.getOwnPropertyDescriptor(l.prototype,"renderReply"),l.prototype),o=l))||o;t.default=I},BGMu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n("q1tI"),o=(r=a)&&r.__esModule?r:{default:r};var l=function(e){return o.default.createElement("svg",{style:{width:e.size||"24px",height:e.size||"24px"},viewBox:e.viewBox||"0 0 24 24",className:e.className},o.default.createElement("path",{d:"M10,21V19H6.41L10.91,14.5L9.5,13.09L5,17.59V14H3V21H10M14.5,10.91L19,6.41V10H21V3H14V5H17.59L13.09,9.5L14.5,10.91Z"}))};l.displayName="ArrowExpand",t.default=l},EXzC:function(e,t,n){"use strict";var r=n("284h");n("R5XZ"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("q1tI")),o=a.default.forwardRef((function(e,t){return(0,a.useEffect)((function(){var e;return function n(){e=setTimeout((function(){t.current&&"complete"===document.readyState?t.current.scrollIntoView({block:"center"}):n()}),200)}(),function(){clearTimeout(e)}}),[]),null}));t.default=o,e.exports=t.default},LdSO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n("q1tI"),o=(r=a)&&r.__esModule?r:{default:r};var l=function(e){return o.default.createElement("svg",{style:{width:e.size||"24px",height:e.size||"24px"},viewBox:e.viewBox||"0 0 24 24",className:e.className},o.default.createElement("path",{d:"M19,15L13,21L11.58,19.58L15.17,16H4V4H6V14H15.17L11.58,10.42L13,9L19,15Z"}))};l.displayName="SubdirectoryArrowRight",t.default=l},"O/sl":function(e,t,n){"use strict";var r=n("TqRt"),a=n("284h");n("ToJy"),n("5DmW"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,l,u,s,i=r(n("lwsE")),d=r(n("W8MJ")),c=r(n("PJYZ")),f=r(n("7W2i")),m=r(n("a1gu")),p=r(n("Nsbk")),h=r(n("lSNA")),y=r(n("U+yc")),v=r(n("17x9")),R=a(n("q1tI")),g=n("/MKj"),E=n("ANjH"),w=n("oj8d"),C=r(n("TSYQ")),b=r(n("UUWn")),T=r(n("YPsS")),_=r(n("6ocl")),x=r(n("m0wp")),M=r(n("JAAC")),S=r(n("yyE3")),O=n("jcWU"),N=a(n("KUH5")),P=r(n("uVkk")),A=r(n("iTuj"));function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,m.default)(this,n)}}var k="created-asc",I="created-desc",j=(0,g.connect)((function(e){return{mode:e.commentFeedMode}}),(function(e){return(0,E.bindActionCreators)({loadComments:N.default,setNormalMode:N.setNormalMode},e)}))((s=u=function(e){(0,f.default)(n,e);var t=D(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this,e),(0,h.default)((0,c.default)(r),"loadPage",(function(e){var t=r.props.story,n=r.state.sort;r.props.loadComments(t.id,n,void 0,r.context.store.getState(),e),r.setState({askedForMoreComments:!0})})),(0,h.default)((0,c.default)(r),"renderMoreComments",(function(){return R.default.createElement(b.default,{onEnter:r.nextPage,threshold:.5})})),(0,h.default)((0,c.default)(r),"renderFilters",(function(){return r.props.story.comments<10?null:R.default.createElement("div",{className:A.default.filters},R.default.createElement("ul",{className:A.default.comment_menu},R.default.createElement("li",{className:(0,C.default)({active:r.state.sort===I})},R.default.createElement("a",{title:r.context.translate("comment.menu_recent"),onClick:r.sortByDateDesc},r.context.translate("comment.menu_recent"))),R.default.createElement("li",{className:(0,C.default)({active:r.state.sort===k})},R.default.createElement("a",{title:r.context.translate("comment.menu_old"),onClick:r.sortByDateAsc},r.context.translate("comment.menu_old")))))})),(0,h.default)((0,c.default)(r),"renderHeader",(function(){var e=r.props.story;return R.default.createElement(_.default,{amount:e.comments,filters:r.renderFilters()})})),r.state={sort:I,askedForMoreComments:!1},r}return(0,d.default)(n,[{key:"sortByDateDesc",value:function(){this.sort(I)}},{key:"sortByDateAsc",value:function(){this.sort(k)}},{key:"loadInitialComments",value:function(){var e=this.props.story,t=this.state.sort;this.setState({loaded:!0}),this.props.loadComments(e.id,t,void 0,this.context.store.getState())}},{key:"nextPage",value:function(){var e=this.props,t=e.story,n=e.commentFeed,r=this.state.sort;this.props.loadComments(t.id,r,n.feed.after,this.context.store.getState()),this.setState({askedForMoreComments:!0})}},{key:"sort",value:function(e){this.props.setNormalMode(),this.props.loadComments(this.props.story.id,e,void 0,this.context.store.getState(),0),this.setState({sort:e})}},{key:"renderComments",value:function(e,t,n){return t.length>0&&R.default.createElement(S.default,{commentIds:t,totalComments:this.props.commentFeed.feed.totalCount,story:e,user:n,showActions:this.props.showActions})}},{key:"render",value:function(){var e=this.props,t=e.story,n=e.commentFeed,r=e.user,a=e.mode,o=!!n.feed.items;return R.default.createElement("section",null,this.context.isMobile&&!r&&!n.loaded&&!n.loading&&R.default.createElement(P.default,{loadComments:this.loadInitialComments}),(!this.context.isMobile||r||this.state.loaded||n.loaded)&&R.default.createElement(T.default,null,R.default.createElement("div",{className:A.default.hash,id:"comments"}),this.renderHeader(),this.props.showActions&&n.feed.count>5&&R.default.createElement(M.default,{parentType:"story",parentId:t.id,user:r,story:t}),o&&R.default.createElement(R.default.Fragment,null,R.default.createElement(O.CommentSeeMore,{top:!0,direction:N.TARGET_DIRECTIONS.BEFORE}),this.renderComments(t,n.feed.items,r),R.default.createElement(O.CommentSeeMore,{direction:N.TARGET_DIRECTIONS.AFTER})),o&&!n.loading&&n.feed.totalCount>n.feed.items.length&&a===N.LOADING_MODES.NORMAL&&this.renderMoreComments(),n.loading&&R.default.createElement(x.default,null),this.props.showActions&&R.default.createElement(M.default,{parentType:"story",parentId:t.id,story:t,user:r,bottomRadius:!0})))}}]),n}(R.Component),(0,h.default)(u,"contextTypes",{translate:v.default.func.isRequired,store:v.default.object.isRequired,history:v.default.any.isRequired,isMobile:v.default.bool.isRequired}),l=s,(0,y.default)(l.prototype,"sortByDateDesc",[w.autobind],Object.getOwnPropertyDescriptor(l.prototype,"sortByDateDesc"),l.prototype),(0,y.default)(l.prototype,"sortByDateAsc",[w.autobind],Object.getOwnPropertyDescriptor(l.prototype,"sortByDateAsc"),l.prototype),(0,y.default)(l.prototype,"loadInitialComments",[w.autobind],Object.getOwnPropertyDescriptor(l.prototype,"loadInitialComments"),l.prototype),(0,y.default)(l.prototype,"nextPage",[w.autobind],Object.getOwnPropertyDescriptor(l.prototype,"nextPage"),l.prototype),(0,y.default)(l.prototype,"sort",[w.autobind],Object.getOwnPropertyDescriptor(l.prototype,"sort"),l.prototype),(0,y.default)(l.prototype,"renderComments",[w.autobind],Object.getOwnPropertyDescriptor(l.prototype,"renderComments"),l.prototype),o=l))||o;t.default=j,e.exports=t.default},ONQB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n("q1tI"),o=(r=a)&&r.__esModule?r:{default:r};var l=function(e){return o.default.createElement("svg",{style:{width:e.size||"24px",height:e.size||"24px"},viewBox:e.viewBox||"0 0 24 24",className:e.className},o.default.createElement("path",{d:"M20,2H4A2,2 0 0,0 2,4V22L6,18H20A2,2 0 0,0 22,16V4A2,2 0 0,0 20,2M20,16H6L4,18V4H20"}))};l.displayName="MessageOutline",t.default=l},Ooxg:function(e,t,n){"use strict";var r=n("284h"),a=n("TqRt");n("2B1R"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=v;var o=a(n("J4zp")),l=a(n("17x9")),u=r(n("q1tI")),s=n("/MKj"),i=a(n("KUH5")),d=a(n("YPsS")),c=a(n("A3KS")),f=a(n("m0wp")),m=a(n("yyE3")),p=a(n("uVkk")),h=a(n("iTuj")),y="created-desc";function v(e,t){var n,r=e.story,a=e.commentsTop,l=e.showActions,v=e.user,R=t.store,g=(t.translate,t.isMobile),E=y,w=(0,u.useState)(!1),C=(0,o.default)(w,2),b=C[0],T=C[1],_=(0,s.useDispatch)(),x=(0,u.useCallback)((function(){T(!0),_((0,i.default)(r.id,E,void 0,R.getState()),[])}),[r,E,R]),M=null==a||null===(n=a.data)||void 0===n?void 0:n.items,S=M&&M.map((function(e){return e.id}));return u.default.createElement("section",null,g&&!v&&!a.loaded&&!a.loading&&u.default.createElement(p.default,{loadComments:x}),(!g||v||b)&&u.default.createElement(d.default,{className:h.default.topContainer},u.default.createElement("div",{className:h.default.hash,id:"comments"}),u.default.createElement(c.default,null),!!M&&S.length>0&&u.default.createElement(m.default,{commentIds:S,totalComments:M.length,story:r,user:v,showActions:l}),a.loading&&u.default.createElement(f.default,null)))}v.contextTypes={translate:l.default.func.isRequired,store:l.default.object.isRequired,isMobile:l.default.bool.isRequired},e.exports=t.default},ThMM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n("q1tI"),o=(r=a)&&r.__esModule?r:{default:r};var l=function(e){return o.default.createElement("svg",{style:{width:e.size||"24px",height:e.size||"24px"},viewBox:e.viewBox||"0 0 24 24",className:e.className},o.default.createElement("path",{d:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"}))};l.displayName="ChevronRight",t.default=l},YPsS:function(e,t,n){"use strict";var r=n("284h"),a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CommentContainer=void 0;var o=a(n("lwsE")),l=a(n("W8MJ")),u=a(n("7W2i")),s=a(n("a1gu")),i=a(n("Nsbk")),d=r(n("q1tI")),c=(a(n("17x9")),n("K73w")),f=a(n("TSYQ")),m=a(n("A5HN"));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,i.default)(e);if(t){var a=(0,i.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var h=function(e){(0,u.default)(n,e);var t=p(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,l.default)(n,[{key:"render",value:function(){var e=(0,f.default)(m.default.comment_container,this.props.className);return d.default.createElement(c.SurfacePrimary,{className:e},this.props.children)}}]),n}(d.PureComponent);t.CommentContainer=h;var y=h;t.default=y},aE60:function(e,t,n){"use strict";var r=n("TqRt"),a=n("284h");n("ma9I"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,l,u,s=r(n("lwsE")),i=r(n("W8MJ")),d=r(n("PJYZ")),c=r(n("7W2i")),f=r(n("a1gu")),m=r(n("Nsbk")),p=r(n("lSNA")),h=r(n("17x9")),y=a(n("q1tI")),v=n("/MKj"),R=n("ANjH"),g=n("ZIRW"),E=n("WpvT"),w=r(n("mdJ6"));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.default)(this,n)}}var b=(0,v.connect)((function(){return{}}),(function(e){return(0,R.bindActionCreators)({reportComment:E.reportComment},e)}))((u=l=function(e){(0,c.default)(n,e);var t=C(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,p.default)((0,d.default)(e),"handleConfirm",(function(t,n,r){return e.props.reportComment(e.props.comment.id,t,n,r)})),e}return(0,i.default)(n,[{key:"render",value:function(){return y.default.createElement(w.default,{handleConfirm:this.handleConfirm,onHide:this.props.onHide,type:"comment",reasons:g.newReportReasons.comment,alternativeTitle:this.context.translate("comment.amount",{comments:1})})}}]),n}(y.Component),(0,p.default)(l,"contextTypes",{translate:h.default.func.isRequired}),o=u))||o;t.default=b,e.exports=t.default},b62M:function(e,t,n){"use strict";var r=n("284h"),a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("lwsE")),l=a(n("W8MJ")),u=a(n("7W2i")),s=a(n("a1gu")),i=a(n("Nsbk")),d=a(n("lSNA")),c=r(n("q1tI")),f=a(n("17x9")),m=a(n("TSYQ")),p=a(n("JfZN")),h=a(n("umDA")),y=a(n("9XjU")),v=a(n("JX7m"));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,i.default)(e);if(t){var a=(0,i.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var g=function(e){(0,u.default)(n,e);var t=R(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,l.default)(n,[{key:"render",value:function(){var e=this.props.showHiddenComment,t=e?"collapse":"display",n=(0,m.default)((0,d.default)({},v.default.toggleIcon,e));return c.default.createElement("div",{className:v.default.hiddenComment},c.default.createElement(y.default,{tooltip:{id:"show-comment-".concat(this.props.commentId),message:this.context.translate("comment.".concat(t,".alert"))},onClick:this.props.onToggle},e?c.default.createElement(p.default,{className:n,size:20}):c.default.createElement(h.default,{className:n,size:20})))}}]),n}(c.PureComponent);t.default=g,(0,d.default)(g,"contextTypes",{translate:f.default.func.isRequired}),e.exports=t.default},gswB:function(e,t,n){"use strict";var r=n("TqRt"),a=n("284h");n("ma9I"),n("fbCW"),n("+2oP"),n("sMBO"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,l,u,s=r(n("lwsE")),i=r(n("W8MJ")),d=r(n("PJYZ")),c=r(n("7W2i")),f=r(n("a1gu")),m=r(n("Nsbk")),p=r(n("lSNA")),h=a(n("q1tI")),y=n("/MKj"),v=n("ANjH"),R=n("55Ip"),g=r(n("TSYQ")),E=r(n("LdSO")),w=r(n("17x9")),C=n("6imW"),b=a(n("Sazc")),T=n("uPzq"),_=r(n("Cgsy")),x=n("tkci"),M=n("+OKP"),S=n("rh/H"),O=n("GBVQ"),N=r(n("yKMz")),P=r(n("b62M")),A=r(n("m8GG")),D=r(n("9GZs")),k=r(n("kqG7")),I=r(n("EXzC")),j=n("RLaN"),B=r(n("pHu+")),q=r(n("v9BT")),L=r(n("lpEZ")),H=r(n("kP1w")),V=r(n("y6ZJ")),W=r(n("LphG"));function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.default)(this,n)}}var J=(0,y.connect)((function(e,t){return{owner:e.entities.users.data[t.comment.owner],storyOwner:e.entities.users.data[e.entities.stories.data[t.story.id].owner],channelOwnerUsername:(0,_.default)(e,e.entities.stories.data[t.story.id]),user:e.auth.user,topComments:e.resources[(0,T.topComments)(t.story.id).name]}}),(function(e){return(0,v.bindActionCreators)({hideComment:M.hideComment,unhideComment:M.unhideComment},e)}))((u=l=function(e){(0,c.default)(n,e);var t=F(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,p.default)((0,d.default)(e),"viewRef",h.default.createRef()),(0,p.default)((0,d.default)(e),"state",{deleteModalVisible:!1,showHiddenComment:!1,over:!1}),(0,p.default)((0,d.default)(e),"onMouseOver",(function(){return e.setState({over:!0})})),(0,p.default)((0,d.default)(e),"onMouseOut",(function(){return e.setState({over:!1})})),(0,p.default)((0,d.default)(e),"isModerator",(function(){return"moderator"===e.props.story.channel.state.subscription})),(0,p.default)((0,d.default)(e),"isAdmin",(function(){return"administrator"===e.props.story.channel.state.subscription})),(0,p.default)((0,d.default)(e),"classicType",(function(){var t=e.props.story;return t&&t.hasOwnProperty("classic")&&t.classic&&t.classic.hasOwnProperty("tid")?t.classic.type:void 0})),(0,p.default)((0,d.default)(e),"hideDeleteModal",(function(){e.setState({deleteModalVisible:!1})})),(0,p.default)((0,d.default)(e),"showDeleteModal",(function(){e.props.user.username===e.props.comment.owner?(0,x.showDeleteCommentModal)(e.context.store.dispatch,e.context.translate,e.getData()):e.setState({deleteModalVisible:!0})})),(0,p.default)((0,d.default)(e),"isLogged",(function(){return!!e.props.user})),(0,p.default)((0,d.default)(e),"showReportButton",(function(){return e.props.comment.owner!==e.props.user.username})),(0,p.default)((0,d.default)(e),"showDeleteButton",(function(){return b.userCanDeleteComment(e.props.user,e.props.storyOwner.id,e.props.owner.id,e.props.channelOwnerUsername)||e.isModerator()||e.isAdmin()})),(0,p.default)((0,d.default)(e),"canToggleVisibility",(function(){return b.userCanChangeCommentVisibility(e.props.user,e.props.storyOwner.username,e.props.channelOwnerUsername)||e.isModerator()||e.isAdmin()})),(0,p.default)((0,d.default)(e),"unhideComment",(function(){e.toggleVisibility(e.props.unhideComment)})),(0,p.default)((0,d.default)(e),"hideComment",(function(){e.toggleVisibility(e.props.hideComment)})),(0,p.default)((0,d.default)(e),"toggleVisibility",(function(t){t(e.props.comment.id),e.setState({showHiddenComment:!1})})),(0,p.default)((0,d.default)(e),"toggleLocalCommentVisibility",(function(){e.setState((function(e){return{showHiddenComment:!e.showHiddenComment}}))})),(0,p.default)((0,d.default)(e),"renderModDeleteModal",(function(){return e.state.deleteModalVisible?h.default.createElement(V.default,{data:e.getData(),onClose:e.hideDeleteModal}):null})),(0,p.default)((0,d.default)(e),"renderCommentToggle",(function(){var t=e.state.showHiddenComment;return h.default.createElement(h.default.Fragment,null,h.default.createElement(P.default,{commentId:e.props.comment.id,onToggle:e.toggleLocalCommentVisibility,showHiddenComment:t}),t&&e.renderComment())})),e}return(0,i.default)(n,[{key:"getData",value:function(){return{storyId:this.props.story.id,commentId:this.props.comment.id,parentId:this.props.parentId,storyType:this.classicType()}}},{key:"ownerCanonical",value:function(){return(0,C.user)(this.props.owner.username)}},{key:"isCommentTop",value:function(){var e,t,n=this.props,r=n.topComments,a=n.comment;return!!(null==r||null===(e=r.data)||void 0===e||null===(t=e.items)||void 0===t?void 0:t.slice(0,2).find((function(e){return e.id===a.id})))}},{key:"renderComment",value:function(){var e,t,n,r,a=this.props,o=a.comment,l=a.owner,u=a.user,s=a.reply,i=a.story,d=a.parentId,c=a.storyOwner,f=a.channelOwnerUsername,m=a.showReplyBox,y=a.showActions,v=a.isReplying,w=a.focus,C="link"===(null==o||null===(e=o.attachment)||void 0===e?void 0:e.type),b=(0,g.default)(W.default.comment_details,(t={},(0,p.default)(t,W.default.comment_details_link,C&&!s),(0,p.default)(t,W.default.comment_details_link_reply,C&&s),t)),T=(0,g.default)((0,p.default)({"media-heading":!0},W.default.comment_username,!0)),_=(0,g.default)((n={},(0,p.default)(n,W.default.container,!0),(0,p.default)(n,W.default.lowOpacity,this.state.showHiddenComment&&!this.props.parentIsHidden),(0,p.default)(n,W.default.focus,w),n)),x=(0,g.default)((r={},(0,p.default)(r,W.default.comment_time,!0),(0,p.default)(r,W.default.comment_time_reply,s),r)),M=34,P=(0,j.getGamificationInfo)(l).frameType===S.FrameType.TITEM;return P?o.parentId||(M=45):o.parentId&&(M=24),h.default.createElement("article",{className:_,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,ref:this.viewRef},w&&h.default.createElement(I.default,{ref:this.viewRef}),this.renderModDeleteModal(),s&&h.default.createElement("div",{className:W.default.arrow_reply},h.default.createElement(E.default,{size:18})),h.default.createElement("div",{className:(0,g.default)(W.default.header,(0,p.default)({},W.default.header_framed,P))},h.default.createElement(k.default,{username:l.username,className:(0,g.default)(W.default.header_avatar,(0,p.default)({},W.default.header_avatar_small,!!o.parentId))},h.default.createElement(R.Link,{className:W.default.comment_avatar,to:this.ownerCanonical(),title:this.context.translate("title.avatar")},h.default.createElement(D.default,{src:l.avatar,size:M,user:l,type:S.FrameType.DEFAULT,onlyStaticFrame:!0})))),h.default.createElement(O.VFlex,{className:b,align:"start"},h.default.createElement(O.HFlex,null,h.default.createElement(O.HFlex,{className:W.default.comment_meta,align:"baseline"},h.default.createElement("h5",{"data-role":"comment-username",className:T},h.default.createElement(A.default,{withLink:!0,user:l})),h.default.createElement("div",{className:x},h.default.createElement(N.default,{compact:!0,date:o.created})),h.default.createElement(B.default,{commentOwner:l.id,storyOwner:c.id,user:u?u.id:void 0,top:this.isCommentTop()}))),h.default.createElement(q.default,{comment:o,classicType:this.classicType(),footer:h.default.createElement(L.default,{comment:o,storyId:i.id,classicType:this.classicType(),parentId:d,user:u,owner:l,storyOwner:c,channelOwnerUsername:f,showReplyBox:m,showActions:y,isReplying:v},h.default.createElement(H.default,{over:this.state.over||this.state.showHiddenComment,showDeleteButton:this.isLogged()&&this.showDeleteButton(),unhideComment:this.unhideComment,hideComment:this.hideComment,showToggleVisibilityButton:this.isLogged()&&this.canToggleVisibility(),showDeleteModal:this.showDeleteModal,comment:o,user:u,showReportButton:!0})),seeMore:this.props.seeMore})))}},{key:"render",value:function(){var e=this.props,t=e.comment,n=e.reply;return this.props.shouldRenderCommentToggle(t)&&n?this.renderCommentToggle():!n||this.props.shouldRenderComment(t,this.props.owner)?this.renderComment():null}}]),n}(h.Component),(0,p.default)(l,"defaultProps",{focus:!1}),(0,p.default)(l,"contextTypes",{translate:w.default.func.isRequired,store:w.default.object.isRequired}),o=u))||o;t.default=J,e.exports=t.default},jcWU:function(e,t,n){"use strict";var r=n("284h"),a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.CommentSeeMore=y,t.ReplySeeMore=v;var o=a(n("lSNA")),l=r(n("q1tI")),u=a(n("17x9")),s=n("/MKj"),i=a(n("TSYQ")),d=n("KUH5"),c=n("Wl9P"),f=n("8OzT"),m=a(n("WbOl")),p=a(n("PkZD"));function h(e,t){var n,r=e.top,a=e.extraPadded,u=e.loading,s=e.onClick,d=e.children,c=e.value,h=t.translate,y=(0,l.useRef)(),v=(0,l.useRef)(null);return(0,l.useEffect)((function(){y.current&&r&&(u?v.current=document.documentElement.scrollHeight:function(){if(v.current){var e=document.documentElement.scrollHeight-v.current;window.scrollBy(0,e)}}())}),[u,r]),l.default.createElement("div",{ref:y},l.default.createElement(f.SurfaceSecondary,{className:(0,i.default)(p.default.surface,(n={},(0,o.default)(n,p.default.top,r),(0,o.default)(n,p.default.bottom,!r),(0,o.default)(n,p.default.loading,u),(0,o.default)(n,p.default.padded,a),n))},u?l.default.createElement(m.default,null):l.default.createElement("button",{type:"button",className:p.default.button,onClick:s},d||h(c))))}function y(e){var t=e.top,n=e.direction,r=(0,s.useDispatch)(),a=(0,s.useSelector)((function(e){return e.commentFeedMode})),o=(0,s.useSelector)((function(e){return e.commentFeed})),u=o.feed,i=o.target,c=o.loading,f=o.storyId,m=i[n];if(a===d.LOADING_MODES.NORMAL||c||null===f||m.loaded&&""===u[n])return null;return l.default.createElement(h,{top:t,onClick:function(){r((0,d.loadCommentsTarget)(n))},loading:m.loading,value:"see.more.comments"})}function v(e){var t=e.top,n=e.direction,r=e.commentId,a=(0,s.useDispatch)(),o=(0,s.useSelector)((function(e){var t;return null===(t=e.entities.comments.data[r])||void 0===t?void 0:t.replies}));if(!o||""===o[n])return null;var u=!!o["".concat(n,"IsLoading")];return l.default.createElement(h,{extraPadded:!0,loading:u,onClick:function(){u||a((0,c.loadRepliesTarget)(n,r))},top:t,value:"see.more.replies"})}h.contextTypes={translate:u.default.func.isRequired},h.defaultProps={children:null,extraPadded:!1,loading:!1,onClick:function(){},top:!1,value:"see.more"},y.defaultProps={top:!1},v.defaultProps={top:!1}},jnFL:function(e,t,n){"use strict";var r=n("284h"),a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("lwsE")),l=a(n("W8MJ")),u=a(n("7W2i")),s=a(n("a1gu")),i=a(n("Nsbk")),d=a(n("ONQB")),c=r(n("q1tI")),f=a(n("WNZL"));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,i.default)(e);if(t){var a=(0,i.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var p=function(e){(0,u.default)(n,e);var t=m(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,l.default)(n,[{key:"render",value:function(){return c.default.createElement("span",{className:f.default.comment},c.default.createElement(d.default,this.props))}}]),n}(c.Component);t.default=p,e.exports=t.default},kP1w:function(e,t,n){"use strict";var r=n("284h"),a=n("TqRt");n("TeQF"),n("2B1R"),n("rB9j"),n("UxlC"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("lwsE")),l=a(n("W8MJ")),u=a(n("PJYZ")),s=a(n("7W2i")),i=a(n("a1gu")),d=a(n("Nsbk")),c=a(n("lSNA")),f=a(n("17x9")),m=r(n("q1tI")),p=a(n("s4NR")),h=a(n("J87v")),y=n("VT8s"),v=a(n("aE60")),R=a(n("brLl")),g=a(n("jcAO")),E=a(n("tRNz"));function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.default)(this,n)}}var C={placement:"top-end"},b=function(e){(0,s.default)(n,e);var t=w(n);function n(e,r){var a;return(0,o.default)(this,n),a=t.call(this,e,r),(0,c.default)((0,u.default)(a),"showReportModal",(function(){return a.setState({reportModalVisible:!0})})),(0,c.default)((0,u.default)(a),"hideReportModal",(function(){return a.setState({reportModalVisible:!1})})),(0,c.default)((0,u.default)(a),"goToPublicComplaint",(function(){var e=p.default.stringify({url:"https://www.taringa.net/api/comment/".concat(a.props.comment.id)});a.context.history.replace("/public-complaint/form?".concat(e))})),a.items=[{isVisible:function(e){return e.showToggleVisibilityButton},mapProps:function(e,t){return{key:"visibility",label:t.translate("comment.".concat(e.comment.hidden?"unhide":"hide")),onClick:e.comment.hidden?e.unhideComment:e.hideComment}}},{isVisible:function(e){return e.showDeleteButton},mapProps:function(e,t){return{key:"delete",label:t.translate("comment.delete"),onClick:e.showDeleteModal}}},{isVisible:function(e){return e.showReportButton},mapProps:function(e,t,n){return{key:"report",label:t.translate("comment.report"),onClick:e.user?n.showReportModal:n.goToPublicComplaint}}}],a.state={reportModalVisible:!1},a}return(0,l.default)(n,[{key:"render",value:function(){var e=this,t=this.state.reportModalVisible,n=this.props.comment;return m.default.createElement("div",{className:E.default.dots},m.default.createElement(R.default,{id:"comment-".concat(this.props.comment.id,"-options"),options:C,toggle:m.default.createElement(g.default,null,m.default.createElement(y.Dots,null))},this.items.filter((function(t){return t.isVisible(e.props)})).map((function(t){var n=t.mapProps(e.props,e.context,e);return m.default.createElement(h.default,{key:n.key,title:n.label,onClick:n.onClick},n.label)}))),t&&m.default.createElement(v.default,{comment:n,onHide:this.hideReportModal}))}}]),n}(m.PureComponent);b.contextTypes={translate:f.default.func.isRequired,history:f.default.object.isRequired};var T=b;t.default=T,e.exports=t.default},lBM1:function(e,t,n){"use strict";var r=n("284h"),a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("lSNA")),l=r(n("q1tI")),u=a(n("TSYQ")),s=(a(n("17x9")),n("SCNW")),i=n("j2hP"),d=a(n("AmC8")),c=a(n("vnhA")),f=a(n("15CI"));function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=(0,l.memo)((function(e){var t,n=e.attachment,r=e.className,a=(0,s.isStickerImage)(n);return l.default.createElement("div",{className:(0,u.default)(f.default.attachment,r)},"link"===n.type&&l.default.createElement(d.default,{attachment:n}),("image"===n.type||"sticker"===n.type)&&l.default.createElement(i.GifFallback,{image:p(p({},n),{},{format:a?"jpg":n.format})},l.default.createElement(c.default,{url:n.url,imageClassName:(0,u.default)((t={},(0,o.default)(t,f.default.sticker_image,a),(0,o.default)(t,f.default.custom_sticker_image,"sticker"===(null==n?void 0:n.type)),t))})))}));t.default=h,e.exports=t.default},lpEZ:function(e,t,n){"use strict";var r=n("TqRt"),a=n("284h");n("ma9I"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,l,u,s=r(n("lwsE")),i=r(n("W8MJ")),d=r(n("PJYZ")),c=r(n("7W2i")),f=r(n("a1gu")),m=r(n("Nsbk")),p=r(n("lSNA")),h=a(n("q1tI")),y=r(n("17x9")),v=n("/MKj"),R=n("ANjH"),g=n("NM1T"),E=n("OfEI"),w=r(n("8pDM")),C=r(n("zu0H")),b=n("VT8s"),T=r(n("Rk1C"));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.default)(this,n)}}var x=(0,v.connect)(null,(function(e){return(0,R.bindActionCreators)({upvote:E.upvote,downvote:E.downvote,unvote:E.unvote},e)}))((u=l=function(e){(0,c.default)(n,e);var t=_(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,p.default)((0,d.default)(e),"showReplyBox",(function(){return e.props.showReplyBox(e.props.comment.owner)})),(0,p.default)((0,d.default)(e),"downvote",(function(){var t;"_klifort_"===e.props.owner.username&&(e.audio||(e.audio=new Audio("/odimeg.mp3")),e.audio.paused?e.audio.play():e.audio.pause()),(t=e.props).downvote.apply(t,arguments)})),e}return(0,i.default)(n,[{key:"showVoteButtons",value:function(){var e=this.props,t=e.user,n=e.owner,r=e.classicType;return e.showActions&&!(r&&t&&t.username===n.username)}},{key:"render",value:function(){var e=this.props,t=e.comment,n=e.classicType,r=e.children,a=this.showVoteButtons()&&this.props.showActions;return h.default.createElement("div",{className:T.default.footer},h.default.createElement("div",{className:T.default.buttons},h.default.createElement(g.VoteButtons,{state:t.state,id:t.id,upvotes:t.upvotes,downvotes:t.downvotes,upvoteAction:this.props.upvote,downvoteAction:this.downvote,unvoteAction:this.props.unvote,classicType:n}),a&&h.default.createElement(w.default,null),this.props.showActions&&h.default.createElement(C.default.Button,{first:a},h.default.createElement(b.Reply,{onClick:this.showReplyBox,active:this.props.isReplying,tooltip:this.context.translate("reply.comment")})),r))}}]),n}(h.Component),(0,p.default)(l,"contextTypes",{translate:y.default.func.isRequired}),o=u))||o;t.default=x,e.exports=t.default},m0wp:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return a.default.createElement(o.default,{className:l.default.loader})};var a=r(n("q1tI")),o=r(n("jpQ4")),l=r(n("QGWD"));e.exports=t.default},"pHu+":function(e,t,n){"use strict";var r=n("284h"),a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("17x9")),l=r(n("q1tI")),u=a(n("a1Cn")),s=n("9JOM"),i=a(n("9R89"));function d(e,t){var n=e.commentOwner,r=e.storyOwner,a=e.top,o=e.user,d=t.translate,c=n===r,f=n===o;return l.default.createElement(l.Fragment,null,c&&l.default.createElement(s.LabelPrivate,{className:i.default.badge,text:d("comment.badges.owner")}),f&&l.default.createElement(s.LabelCreator,{className:i.default.badge,text:d("comment.badges.self")}),a&&l.default.createElement(s.LabelOutstanding,{icon:u.default,className:i.default.badge_top,text:d("comment.badges.top")}))}d.contextTypes={translate:o.default.func.isRequired};var c=d;t.default=c,e.exports=t.default},sJG9:function(e,t,n){"use strict";var r=n("284h"),a=n("TqRt");n("TeQF"),n("yq1k"),n("2B1R"),n("+2oP"),n("sMBO"),n("JTJg"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.story,n=e.user,r=e.commentFeed,a=e.showActions,c=e.commentsRef,f=(0,o.useRef)(),m=(0,l.useSelector)((function(e){return e.resources[(0,d.topComments)(t.id).name]}));if(m&&m.data&&m.data.items){var p;m.data.items=null===(p=m.data.items)||void 0===p?void 0:p.slice(0,2);var h=m.data.items.map((function(e){return e.id}));r.feed.items=r.feed.items.filter((function(e){return!h.includes(e)}))}if(!r)return null;return o.default.createElement("div",{ref:f},o.default.createElement(i.default,{ref:f}),m&&o.default.createElement(s.default,{story:t,commentsTop:m,user:n,showActions:a}),o.default.createElement("div",{ref:c},o.default.createElement(u.default,{story:t,commentFeed:r,user:n,showActions:a})))};a(n("17x9"));var o=r(n("q1tI")),l=n("/MKj"),u=a(n("O/sl")),s=a(n("Ooxg")),i=a(n("7un9")),d=n("uPzq");e.exports=t.default},uVkk:function(e,t,n){"use strict";var r=n("284h"),a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("lwsE")),l=a(n("W8MJ")),u=a(n("7W2i")),s=a(n("a1gu")),i=a(n("Nsbk")),d=a(n("lSNA")),c=r(n("q1tI")),f=a(n("17x9")),m=a(n("jnFL")),p=a(n("ThMM")),h=a(n("Z4PR"));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,i.default)(e);if(t){var a=(0,i.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var v=function(e){(0,u.default)(n,e);var t=y(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,l.default)(n,[{key:"render",value:function(){return c.default.createElement("div",{className:h.default.container,onClick:this.props.loadComments},c.default.createElement("div",{className:h.default.comment_circle},c.default.createElement("div",{className:h.default.comment_icon_container},c.default.createElement(m.default,{className:h.default.comment_icon}))),c.default.createElement("div",{className:h.default.text,dangerouslySetInnerHTML:{__html:this.context.translate("comments.feed.expand")}}),c.default.createElement("div",{className:h.default.arrow_icon_container},c.default.createElement(p.default,{size:45})))}}]),n}(c.Component);t.default=v,(0,d.default)(v,"contextTypes",{translate:f.default.func.isRequired}),e.exports=t.default},v9BT:function(e,t,n){"use strict";var r=n("284h"),a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("lSNA")),l=a(n("lwsE")),u=a(n("W8MJ")),s=a(n("7W2i")),i=a(n("a1gu")),d=a(n("Nsbk")),c=r(n("q1tI")),f=(a(n("17x9")),r(n("FT4A"))),m=n("eV+9"),p=a(n("lBM1")),h=a(n("TSYQ")),y=a(n("tUNu"));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.default)(this,n)}}var R=function(e){(0,s.default)(n,e);var t=v(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return(0,u.default)(n,[{key:"render",value:function(){var e,t=this.props,n=t.comment,r=t.footer,a=t.seeMore,l=t.classicType,u=t.marginLeft,s=(0,h.default)((e={},(0,o.default)(e,y.default.comment_body,!n.parentId),(0,o.default)(e,y.default.comment_body_reply,n.parentId),(0,o.default)(e,y.default.margin_left,u),e)),i=f.render(n.body);return c.default.createElement("div",{"data-role":"comment-body",className:s,lang:m.CONTENT_LANG_DEFAULT},c.default.createElement("div",{className:(0,h.default)({classic:l}),"data-role":"comment-text",dangerouslySetInnerHTML:{__html:i}}),n.attachment&&c.default.createElement(p.default,{attachment:n.attachment}),r,a)}}]),n}(c.PureComponent);t.default=R,e.exports=t.default},vnhA:function(e,t,n){"use strict";var r=n("284h"),a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.url,n=e.imageClassName,r=(0,u.useState)(!0),a=(0,l.default)(r,2),p=a[0],h=a[1],y=(0,u.useCallback)((function(){return h((function(e){return!e}))}),[]),v=(0,f.default)(t,550),R=(0,f.default)(t,120,120),g=(0,u.useMemo)((function(){return p?v:R}),[R,v,p]);return u.default.createElement("div",{onClick:y,className:(0,s.default)(m.default.att_container,(0,o.default)({},m.default.att_container_big,p))},!p&&u.default.createElement("div",{className:m.default.att_container_overlay},u.default.createElement(d.default,{className:m.default.att_expand},u.default.createElement(i.default,null))),u.default.createElement(c.default,{"data-role":"comment-img",src:g,className:(0,s.default)(m.default.image,n)}))};var o=a(n("lSNA")),l=a(n("J4zp")),u=r(n("q1tI")),s=a(n("TSYQ")),i=a(n("BGMu")),d=(a(n("17x9")),a(n("BRCV"))),c=a(n("GzlX")),f=a(n("TJ0W")),m=a(n("Pd7X"));e.exports=t.default},y6ZJ:function(e,t,n){"use strict";var r=n("TqRt"),a=n("284h");n("ma9I"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,l,u,s=r(n("lwsE")),i=r(n("W8MJ")),d=r(n("PJYZ")),c=r(n("7W2i")),f=r(n("a1gu")),m=r(n("Nsbk")),p=r(n("lSNA")),h=a(n("q1tI")),y=n("/MKj"),v=n("ANjH"),R=r(n("17x9")),g=r(n("mdJ6")),E=n("ZIRW"),w=n("jTrL");function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.default)(this,n)}}var b=(0,y.connect)(null,(function(e){return(0,v.bindActionCreators)({modDeleteComment:w.modDeleteComment},e)}))((u=l=function(e){(0,c.default)(n,e);var t=C(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,p.default)((0,d.default)(e),"handleDeleteComment",(function(t){var n=e.props.data,r=n.storyId,a=n.commentId,o=n.parentId,l=n.storyType;e.props.modDeleteComment(r,a,o,l,t.message,t.reason,t.subReason),e.hideReport()})),(0,p.default)((0,d.default)(e),"hideReport",(function(){e.props.onClose&&e.props.onClose()})),e}return(0,i.default)(n,[{key:"render",value:function(){return h.default.createElement(g.default,{type:"comment",actionTitle:"delete",title:"comment.modal.delete.title",handleConfirm:this.handleDeleteComment,onHide:this.hideReport,reasons:E.deleteReasons.story})}}]),n}(h.Component),(0,p.default)(l,"contextTypes",{history:R.default.any.isRequired}),(0,p.default)(l,"defaultProps",{onDelete:null}),o=u))||o;t.default=b,e.exports=t.default},yyE3:function(e,t,n){"use strict";var r=n("TqRt"),a=n("284h");n("2B1R"),n("5DmW"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,l,u=r(n("lwsE")),s=r(n("W8MJ")),i=r(n("7W2i")),d=r(n("a1gu")),c=r(n("Nsbk")),f=r(n("U+yc")),m=a(n("q1tI")),p=(r(n("17x9")),n("oj8d")),h=n("/MKj"),y=r(n("Ajk5"));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,d.default)(this,n)}}var R=(0,h.connect)((function(e){return{commentEntities:e.entities.comments.data,loading:e.entities.comments.loading}}))((l=function(e){(0,i.default)(n,e);var t=v(n);function n(e){var r;return(0,u.default)(this,n),(r=t.call(this,e)).state={activeReplyBox:null},r}return(0,s.default)(n,[{key:"shouldComponentUpdate",value:function(e,t){return!e.loading}},{key:"setActiveReplyBox",value:function(e){this.setState({activeReplyBox:e})}},{key:"renderThread",value:function(e,t){var n=this.props,r=n.commentEntities,a=n.story,o=n.user,l=(n.totalComments,r[e]);if(!l)return null;var u=l.replies?l.replies.items.map((function(e){return r[e]})):[];return m.default.createElement(m.default.Fragment,{key:l.id},m.default.createElement(y.default,{comment:l,story:a,user:o,replies:u,showThisReplyBox:this.setActiveReplyBox,activeReplyBox:this.state.activeReplyBox,showActions:this.props.showActions}))}},{key:"render",value:function(){return m.default.createElement("div",{"data-role":"comment-feed"},this.props.commentIds.map(this.renderThread))}}]),n}(m.Component),(0,f.default)(l.prototype,"setActiveReplyBox",[p.autobind],Object.getOwnPropertyDescriptor(l.prototype,"setActiveReplyBox"),l.prototype),(0,f.default)(l.prototype,"renderThread",[p.autobind],Object.getOwnPropertyDescriptor(l.prototype,"renderThread"),l.prototype),o=l))||o;t.default=R,e.exports=t.default}}]);
//# sourceMappingURL=StoryComments.ee6642aa228a18684364.js.map